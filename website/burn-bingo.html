<!--
  LIST Token Burn Bingo Widget
  Embed this in TypeDream using: /embed > Code

  Features:
  - Randomized 5x5 bingo cards
  - Executed burns marked with fire
  - Generate new cards
  - Share functionality
-->

<style>
  .burn-bingo-widget {
    font-family: 'Inter', -apple-system, sans-serif;
    background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    border-radius: 16px;
    padding: 24px;
    color: white;
    max-width: 500px;
    margin: 0 auto;
  }

  .bingo-header {
    text-align: center;
    margin-bottom: 20px;
  }

  .bingo-header h2 {
    margin: 0 0 8px 0;
    font-size: 24px;
  }

  .bingo-header p {
    margin: 0;
    color: rgba(255, 255, 255, 0.6);
    font-size: 14px;
  }

  .bingo-title-row {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 4px;
    margin-bottom: 4px;
  }

  .bingo-letter {
    background: #ff6b35;
    color: white;
    font-weight: 700;
    font-size: 24px;
    text-align: center;
    padding: 8px;
    border-radius: 8px;
  }

  .bingo-grid {
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    gap: 4px;
  }

  .bingo-cell {
    aspect-ratio: 1;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 8px;
    display: flex;
    align-items: center;
    justify-content: center;
    text-align: center;
    font-size: 11px;
    font-weight: 500;
    padding: 4px;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
    line-height: 1.2;
  }

  .bingo-cell:hover {
    background: rgba(255, 255, 255, 0.2);
  }

  .bingo-cell.executed {
    background: linear-gradient(135deg, #ff6b35, #ff4444);
    text-decoration: line-through;
    opacity: 0.9;
  }

  .bingo-cell.executed::after {
    content: '';
    position: absolute;
    top: 2px;
    right: 2px;
    font-size: 12px;
  }

  .bingo-cell.marked {
    background: rgba(74, 222, 128, 0.3);
    border: 2px solid #4ade80;
  }

  .bingo-cell.free-space {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    font-weight: 700;
    font-size: 10px;
  }

  .bingo-actions {
    display: flex;
    gap: 12px;
    margin-top: 20px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .bingo-btn {
    padding: 12px 20px;
    border-radius: 8px;
    border: none;
    font-weight: 600;
    font-size: 14px;
    cursor: pointer;
    transition: transform 0.2s;
  }

  .bingo-btn:hover {
    transform: translateY(-2px);
  }

  .bingo-btn.primary {
    background: #ff6b35;
    color: white;
  }

  .bingo-btn.secondary {
    background: rgba(255, 255, 255, 0.1);
    color: white;
  }

  .bingo-legend {
    display: flex;
    justify-content: center;
    gap: 20px;
    margin-top: 16px;
    font-size: 12px;
    color: rgba(255, 255, 255, 0.6);
  }

  .legend-item {
    display: flex;
    align-items: center;
    gap: 6px;
  }

  .legend-dot {
    width: 12px;
    height: 12px;
    border-radius: 4px;
  }

  .legend-dot.burned {
    background: linear-gradient(135deg, #ff6b35, #ff4444);
  }

  .legend-dot.pending {
    background: rgba(255, 255, 255, 0.2);
  }

  .card-id {
    text-align: center;
    margin-top: 12px;
    font-size: 11px;
    color: rgba(255, 255, 255, 0.4);
    font-family: monospace;
  }
</style>

<div class="burn-bingo-widget">
  <div class="bingo-header">
    <h2>$LIST Burn Bingo</h2>
    <p>Click names as they get confirmed!</p>
  </div>

  <div class="bingo-title-row">
    <div class="bingo-letter">B</div>
    <div class="bingo-letter">U</div>
    <div class="bingo-letter">R</div>
    <div class="bingo-letter">N</div>
    <div class="bingo-letter">S</div>
  </div>

  <div class="bingo-grid" id="bingoGrid"></div>

  <div class="bingo-legend">
    <div class="legend-item">
      <div class="legend-dot burned"></div>
      <span>Burned</span>
    </div>
    <div class="legend-item">
      <div class="legend-dot pending"></div>
      <span>Pending</span>
    </div>
  </div>

  <div class="bingo-actions">
    <button class="bingo-btn primary" onclick="generateCard()">New Card</button>
    <button class="bingo-btn secondary" onclick="shareCard()">Share</button>
  </div>

  <div class="card-id" id="cardId"></div>
</div>

<script>
  // All burn targets
  const executedNames = [
    'Prince Andrew', 'Bill Clinton', 'Donald Trump', 'Alan Dershowitz',
    'Stephen Hawking', 'Bill Gates', 'Barack Obama', 'Michael Jackson'
  ];

  const pendingNames = [
    'Henry Kissinger', 'Tony Blair', 'Jamie Dimon', 'Sean Combs',
    'Ellen DeGeneres', 'Oprah Winfrey', 'Anderson Cooper', 'Kirsten Gillibrand',
    'Al Gore', 'Jimmy Kimmel', 'Tom Hanks', 'Quentin Tarantino',
    'Robert Downey Jr.', 'David Koch', 'Piers Morgan', 'Rachel Maddow'
  ];

  const allNames = [...executedNames, ...pendingNames];
  let currentCard = [];
  let markedCells = new Set();

  function shuffleArray(array) {
    const shuffled = [...array];
    for (let i = shuffled.length - 1; i > 0; i--) {
      const j = Math.floor(Math.random() * (i + 1));
      [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
    }
    return shuffled;
  }

  function generateCardId() {
    return 'LIST-' + Math.random().toString(36).substring(2, 8).toUpperCase();
  }

  function generateCard() {
    markedCells = new Set();
    const shuffled = shuffleArray(allNames).slice(0, 24);
    currentCard = [];

    // Insert names with free space at position 12 (center)
    let nameIndex = 0;
    for (let i = 0; i < 25; i++) {
      if (i === 12) {
        currentCard.push({ name: 'FREE SPACE', type: 'free' });
      } else {
        const name = shuffled[nameIndex];
        currentCard.push({
          name: name,
          type: executedNames.includes(name) ? 'executed' : 'pending'
        });
        nameIndex++;
      }
    }

    renderCard();
    document.getElementById('cardId').textContent = generateCardId();
  }

  function renderCard() {
    const grid = document.getElementById('bingoGrid');
    grid.innerHTML = '';

    currentCard.forEach((cell, index) => {
      const div = document.createElement('div');
      div.className = 'bingo-cell';

      if (cell.type === 'free') {
        div.classList.add('free-space');
        div.textContent = 'FREE BURN';
      } else {
        div.textContent = cell.name;
        if (cell.type === 'executed') {
          div.classList.add('executed');
        }
        if (markedCells.has(index)) {
          div.classList.add('marked');
        }
        div.onclick = () => toggleMark(index);
      }

      grid.appendChild(div);
    });
  }

  function toggleMark(index) {
    if (currentCard[index].type === 'executed') return; // Can't mark executed

    if (markedCells.has(index)) {
      markedCells.delete(index);
    } else {
      markedCells.add(index);
    }
    renderCard();
    checkBingo();
  }

  function checkBingo() {
    const lines = [
      // Rows
      [0, 1, 2, 3, 4],
      [5, 6, 7, 8, 9],
      [10, 11, 12, 13, 14],
      [15, 16, 17, 18, 19],
      [20, 21, 22, 23, 24],
      // Columns
      [0, 5, 10, 15, 20],
      [1, 6, 11, 16, 21],
      [2, 7, 12, 17, 22],
      [3, 8, 13, 18, 23],
      [4, 9, 14, 19, 24],
      // Diagonals
      [0, 6, 12, 18, 24],
      [4, 8, 12, 16, 20]
    ];

    for (const line of lines) {
      const isBingo = line.every(index => {
        const cell = currentCard[index];
        return cell.type === 'free' || cell.type === 'executed' || markedCells.has(index);
      });

      if (isBingo) {
        setTimeout(() => alert('BINGO! You got a burn line!'), 100);
        return;
      }
    }
  }

  function shareCard() {
    const cardId = document.getElementById('cardId').textContent;
    const text = `My $LIST Burn Bingo card: ${cardId}\n\n25% already burned. Who's next?\n\nhttps://list-coin.com\n\n#LIST #BurnBingo`;

    if (navigator.share) {
      navigator.share({ text });
    } else {
      navigator.clipboard.writeText(text).then(() => {
        alert('Card info copied to clipboard!');
      });
    }
  }

  // Generate initial card
  generateCard();
</script>
